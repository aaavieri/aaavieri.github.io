(function(t){function e(e){for(var r,c,i=e[0],u=e[1],s=e[2],l=0,f=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);p&&p(e);while(f.length)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},o=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var p=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("8bbf"),a=n.n(r),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},c=[],i={name:"app",components:{},mounted:function(){this.$router.push("/list")}},u=i,s=(n("034f"),n("2877")),p=Object(s["a"])(u,o,c,!1,null,null,null),l=p.exports,f=n("5c96"),d=n.n(f);n("c69f");a.a.use(d.a);var b=n("5880"),m=n.n(b);a.a.use(m.a);var h=new m.a.Store({state:{timeLineData:[],provinceData:[]},mutations:{setTimeLineData:function(t,e){t.timeLineData=e},setProvinceData:function(t,e){t.provinceData=e}}}),v=n("6389"),y=n.n(v),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","row-key":"id","tree-props":{children:"cities",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{prop:"name",label:"地区"}}),n("el-table-column",{attrs:{prop:"confirmedCount",label:"确诊"}}),n("el-table-column",{attrs:{prop:"deadCount",label:"死亡"}}),n("el-table-column",{attrs:{prop:"curedCount",label:"治愈"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.cities?[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.showGrow(e.row)}}},[t._v("增长图")])]:void 0}}],null,!0)})],1)],1)},g=[],j=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("d81d"),n("13d5"),n("e439"),n("dbb4"),n("b64b"),n("ac1f"),n("5319"),n("159b"),n("2909")),w=(n("96cf"),n("1da1")),D=n("ade3"),x=n("08c1"),P=n("cebe"),C=n.n(P),S=n("9ca8");n("5c3d");function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(D["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E={name:"ProvinceList",data:function(){return{tableData:[],showGrowChart:!1}},computed:_({},Object(x["b"])(["provinceData","timeLineData"])),methods:_({},Object(x["a"])(["setTimeLineData","setProvinceData"]),{showGrow:function(t){this.$router.push({name:"detail",params:t})},getLatestProvinceData:function(t){var e=Object.keys(t),n=/\//g;return e.sort((function(t,e){return parseInt(t.replace(n,""))-parseInt(e.replace(n,""))})),t[e[e.length-1]]}}),mounted:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,c,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("./json/area.json");case 2:return n=e.sent,r=n.data,e.next=6,C.a.get("./json/timeline.json");case 6:a=e.sent,o=a.data,t.setProvinceData(r),t.setTimeLineData(o),c=1,i=t.getLatestProvinceData(r),u=_({name:"全国",cities:[]},i.reduce((function(t,e){return{confirmedCount:t.confirmedCount+e.confirmedCount,deadCount:t.deadCount+e.deadCount,curedCount:t.curedCount+e.curedCount}}),{confirmedCount:0,deadCount:0,curedCount:0})),t.tableData=[u].concat(Object(j["a"])(i.map((function(t){return _({},t,{id:c++,name:t.provinceShortName,cities:t.cities.map((function(t){return _({},t,{id:c++,name:t.cityName})}))})}))));case 14:case"end":return e.stop()}}),e)})))()}},L=E,M=Object(s["a"])(L,O,g,!1,null,"51b0e9f3",null),$=M.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-page-header",{staticStyle:{"margin-bottom":"20px"},attrs:{content:t.title},on:{back:t.goBack}}),n("v-chart",{attrs:{options:t.chartOption}})],1)},R=[];n("7db0"),n("c975"),n("b0c0"),n("4d63"),n("25f0"),n("466d"),n("841c");function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function F(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(D["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A={name:"ProvinceChart",components:{"v-chart":S["a"]},data:function(){return{title:"",chartOption:{title:{text:""},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"确诊",type:"bar",barWidth:"60%",data:[]}]}}},computed:F({},Object(x["b"])(["timeLineData","provinceData"])),methods:{dateFormat:function(t,e){if(!t)return"";"number"===typeof t&&(t=new Date(t));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("(".concat(r,")")).test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},goBack:function(){this.$router.go(-1)},findPrevDay:function(t){var e=new Date(t),n=new Date(e.getTime()-864e5);return this.provinceData[this.dateFormat(n,"yyyy/MM/dd")]},findOneProvince:function(t,e){return e?e.find((function(e){return e.provinceShortName===t})):null}},mounted:function(){var t=this,e=this.$route.params.name,n=/新增\s*(\d+)\s*例/,r=/\//g,a=Object.keys(this.provinceData).map((function(n){return{date:n,data:t.findOneProvince(e,t.provinceData[n]),prevData:t.findOneProvince(e,t.findPrevDay(n))}}));console.log(a),a=a.filter((function(t){return t.data&&t.prevData})).map((function(t){return{date:t.date,dateInt:parseInt(t.date.replace(r,"")),count:t.data.confirmedCount-t.prevData.confirmedCount,src:1}})),this.timeLineData.filter((function(t){return t.title.indexOf(e)>-1&&t.title.search(n)>-1})).map((function(e){return{count:parseInt(e.title.match(n)[1]),date:t.dateFormat(e.pubDate,"yyyy/MM/dd"),src:2}})).forEach((function(t){t.dateInt=parseInt(t.date.replace(r,""));var e=a.find((function(e){return t.date===e.date}));e?e.src>=t.src&&(e.count=Math.max(e.count,t.count)):a.push(t)})),a.sort((function(t,e){return t.dateInt-e.dateInt})),this.title="".concat(e,"确诊人数趋势图"),this.chartOption.xAxis[0].data=a.map((function(t){return t.date})),this.chartOption.series[0].data=a.map((function(t){return t.count}))}},B=A,G=Object(s["a"])(B,I,R,!1,null,"2727201c",null),N=G.exports;a.a.use(y.a);var V=new y.a({routes:[{path:"/",redirect:"home"},{path:"/list",name:"list",component:$},{path:"/detail",name:"detail",component:N}]});a.a.config.productionTip=!1,new a.a({render:function(t){return t(l)},store:h,router:V}).$mount("#app")},5880:function(t,e){t.exports=Vuex},6389:function(t,e){t.exports=VueRouter},"85ec":function(t,e,n){},"8bbf":function(t,e){t.exports=Vue},c69f:function(t,e,n){},cebe:function(t,e){t.exports=axios}});
//# sourceMappingURL=app.f06904f4.js.map