(function(t){function e(e){for(var r,i,c=e[0],u=e[1],s=e[2],l=0,f=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);p&&p(e);while(f.length)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var p=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"164e":function(t,e){t.exports=echarts},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("8bbf"),a=n.n(r),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],c={name:"app",components:{},mounted:function(){this.$router.push("/list")}},u=c,s=(n("034f"),n("2877")),p=Object(s["a"])(u,o,i,!1,null,null,null),l=p.exports,f=(n("5f72"),n("c69f"),n("5880")),d=n.n(f);a.a.use(d.a);var b=new d.a.Store({state:{timeLineData:[],provinceData:{}},mutations:{setTimeLineData:function(t,e){t.timeLineData=e},setProvinceData:function(t,e){t.provinceData=e}}}),m=n("6389"),h=n.n(m),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","row-key":"id","tree-props":{children:"cities",hasChildren:"hasChildren"}}},[n("el-table-column",{attrs:{prop:"name",label:"地区"}}),n("el-table-column",{attrs:{prop:"confirmedCount",label:"确诊"}}),n("el-table-column",{attrs:{prop:"deadCount",label:"死亡"}}),n("el-table-column",{attrs:{prop:"curedCount",label:"治愈"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.cities?[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.showGrow(e.row)}}},[t._v("增长图")])]:void 0}}],null,!0)})],1)],1)},y=[],O=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("d81d"),n("13d5"),n("e439"),n("dbb4"),n("b64b"),n("ac1f"),n("5319"),n("159b"),n("2909")),g=(n("96cf"),n("1da1")),j=n("ade3"),w=n("08c1"),D=n("cebe"),x=n.n(D);function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(j["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k={name:"ProvinceList",data:function(){return{tableData:[],showGrowChart:!1}},computed:C({},Object(w["b"])(["provinceData","timeLineData"])),methods:C({},Object(w["a"])(["setTimeLineData","setProvinceData"]),{showGrow:function(t){this.$router.push({name:"detail",params:t})},getLatestProvinceData:function(t){var e=Object.keys(t),n=/\//g;return e.sort((function(t,e){return parseInt(t.replace(n,""))-parseInt(e.replace(n,""))})),t[e[e.length-1]]}}),mounted:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o,i,c,u,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.provinceData,0!==Object.keys(t.provinceData).length){e.next=8;break}return e.next=4,x.a.get("./json/area.json");case 4:r=e.sent,a=r.data,t.setProvinceData(a),n=a;case 8:if(o=1,i=t.getLatestProvinceData(n),c=C({name:"全国",cities:[]},i.reduce((function(t,e){return{confirmedCount:t.confirmedCount+e.confirmedCount,deadCount:t.deadCount+e.deadCount,curedCount:t.curedCount+e.curedCount}}),{confirmedCount:0,deadCount:0,curedCount:0})),t.tableData=[c].concat(Object(O["a"])(i.map((function(t){return C({},t,{id:o++,name:t.provinceShortName,cities:t.cities.map((function(t){return C({},t,{id:o++,name:t.cityName})}))})})))),0!==t.timeLineData.length){e.next=18;break}return e.next=15,x.a.get("./json/timeline.json");case 15:u=e.sent,s=u.data,t.setTimeLineData(s);case 18:case"end":return e.stop()}}),e)})))()}},S=k,E=Object(s["a"])(S,v,y,!1,null,"c380f9d8",null),L=E.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-page-header",{staticStyle:{"margin-bottom":"20px"},attrs:{content:t.title},on:{back:t.goBack}}),n("v-chart",{attrs:{options:t.chartOption}})],1)},M=[],$=(n("7db0"),n("c975"),n("b0c0"),n("4d63"),n("25f0"),n("466d"),n("841c"),n("164e"),n("54f5"),n("9ca8"));function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(j["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T={name:"ProvinceChart",components:{"v-chart":$["a"]},data:function(){return{title:"",chartOption:{title:{text:""},color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"确诊",type:"bar",barWidth:"60%",data:[]}]}}},computed:R({},Object(w["b"])(["timeLineData","provinceData"])),methods:{dateFormat:function(t,e){if(!t)return"";"number"===typeof t&&(t=new Date(t));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("(".concat(r,")")).test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},goBack:function(){this.$router.go(-1)},findPrevDay:function(t){var e=new Date(t),n=new Date(e.getTime()-864e5);return this.provinceData[this.dateFormat(n,"yyyy/MM/dd")]},findOneProvince:function(t,e){return e?e.find((function(e){return e.provinceShortName===t})):null}},mounted:function(){var t=this,e=this.$route.params.name,n=/新增\s*(\d+)\s*例/,r=/\//g,a=Object.keys(this.provinceData).map((function(n){return{date:n,data:t.findOneProvince(e,t.provinceData[n]),prevData:t.findOneProvince(e,t.findPrevDay(n))}}));a=a.filter((function(t){return t.data&&t.prevData})).map((function(t){return{date:t.date,dateInt:parseInt(t.date.replace(r,"")),count:t.data.confirmedCount-t.prevData.confirmedCount,src:1}})),this.timeLineData.filter((function(t){return t.title.indexOf(e)>-1&&t.title.search(n)>-1})).map((function(e){return{count:parseInt(e.title.match(n)[1]),date:t.dateFormat(e.pubDate,"yyyy/MM/dd"),src:2}})).forEach((function(t){t.dateInt=parseInt(t.date.replace(r,""));var e=a.find((function(e){return t.date===e.date}));e?e.count<t.count&&Object.assign(e,t):a.push(t)})),a.sort((function(t,e){return t.dateInt-e.dateInt})),this.title="".concat(e,"确诊人数趋势图"),this.chartOption.xAxis[0].data=a.map((function(t){return t.date})),this.chartOption.series[0].data=a.map((function(t){return t.count}))}},F=T,A=Object(s["a"])(F,_,M,!1,null,"f7275220",null),B=A.exports;a.a.use(h.a);var G=new h.a({routes:[{path:"/",redirect:"home"},{path:"/list",name:"list",component:L},{path:"/detail",name:"detail",component:B}]});a.a.config.productionTip=!1,new a.a({render:function(t){return t(l)},store:b,router:G}).$mount("#app")},5880:function(t,e){t.exports=Vuex},"5f72":function(t,e){t.exports=Element},6389:function(t,e){t.exports=VueRouter},"85ec":function(t,e,n){},"8bbf":function(t,e){t.exports=Vue},c69f:function(t,e,n){},cebe:function(t,e){t.exports=axios}});